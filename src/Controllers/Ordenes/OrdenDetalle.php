<?phpnamespace Controllers\Ordenes;use Controllers\PublicController;use Dao\Cart\Cart;use Dao\Security\Usuario as UsuarioDao;use Views\Renderer;class OrdenDetalle extends PublicController{    private $viewData = [];    private $usercod = 0;    private $nombreUsuario = "";    private $correoUsuario = "";    private $orderId = 0;    private $fechaFormateada = "";    private $subtotal = 0;    private $isv = 0;    private $total = 0;        private function getUserDetails(): void    {        $this->usercod = \Utilities\Security::getUserId();                //obtener los datos del usuario desde la base de datos        $tmpDataFromDB = UsuarioDao::getByPrimaryKey($this->usercod);                if ($tmpDataFromDB) {            $this->nombreUsuario = $tmpDataFromDB["username"];            $this->correoUsuario = $tmpDataFromDB["useremail"];        }                  }    private function getBookDetails(): void    {        $this->orderId = $_GET["id"] ?? 0;        $tmpDataFromDB = Cart::getOrderDetails($this->orderId);                if (setlocale(LC_TIME, 'spanish') === false) {            echo 'La configuración regional spanish no está disponible en tu sistema.';        } else {            foreach ($tmpDataFromDB as $item) {                $this->isv += $item["Cantidad"] * 15;                $this->subtotal += $item["Precio"] * $item["Cantidad"];                $this->total = $this->subtotal + $this->isv;                $fecha = $item["Fecha"];                $this->fechaFormateada = strftime('%e de %B', strtotime($fecha)); // '%e de %B' representa el día y el mes completo en texto            }        }    }    private function prepareView(): void    {        $this->viewData["nombreUsuario"] = $this->nombreUsuario;        $this->viewData["correoUsuario"] = $this->correoUsuario;        $this->viewData["item"] = Cart::getOrderDetails($this->orderId);        $this->viewData["orderId"] = $this->orderId;        $this->viewData["fechaOrden"] = $this->fechaFormateada;        $this->viewData["subtotal"] = $this->subtotal;        $this->viewData["isv"] = $this->isv;        $this->viewData["total"] = $this->total;    }    public function run(): void    {        $this->getBookDetails();        $this->getUserDetails();        $this->prepareView();        Renderer::render("ordenes/detalle", $this->viewData);    }}